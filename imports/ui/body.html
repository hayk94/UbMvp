<body>
  <!-- <ul>
    {{#each tasks}}
      {{> task}}
    {{/each}}
  </ul> -->


    <!-- {{>mainLayout}} -->

    <!-- <h2>Connections</h2> -->
    <!-- {{#each conns}}
      {{> conn}}
    {{/each}} -->
    <!-- <pre>
      {{conns}}
    </pre> -->

</body>

<template name="mainLayout">
  <header>
    <nav class="navbar">
      <a class="nav-item btn btn-info link" href="/ips">ips</a>
      <a class="nav-item btn btn-info link" href="/ui">UI</a>
    </nav>
  </header>
  <main>
    <div class="container">
      {{>Template.dynamic template=content}}
    </div>
  </main>
</template>

<template name="ui">
  <a class="btn btn-info link" href="/">Back</a>
  <h1>UI</h1>

  {{#each ips}}
    <div class="jumbotron">
      <p>
        <h2><strong>IP: </strong><span>{{ipAdr}}</span></h2>
      </p>
    </div>
    {{#each connections}}
    <div class="container">

      <div class="row">
        <div class="col-md-12 text-md-center text text-help">
          <h2>Connection</h2>
          <p>
            <p>
              <strong>{{hubspotInfo.result.content.firstname.value}} </strong>
              <strong>{{hubspotInfo.result.content.lastname.value}}</strong>
            </p>
            <p>
              <strong>{{hubspotInfo.result.content.email.value}}</strong>

            </p>
          </p>
          <p>
            <strong>Started:</strong> {{connectedAt}}
          </p>
          <p>
            {{#if disconnectedAt}}
              <strong>Stoped:</strong> {{disconnectedAt}}
              {{else}}
              <span class="label label-success">ONLINE</span>
            {{/if}}
          </p>
        </div>
      </div>
      <div class="row">

        <div class="col-md-6">
          <h4>User Visited Pages</h4>
        {{#each visits}}
            <div>
              <p>
                <strong>Visited Link :</strong> {{visitedThis}}
              </p>
              <p>
                <strong>Visited At: </strong>{{visitedAt}}
              </p>
            </div>
        {{/each}}
          </div>

          <div class="col-md-6">
            <h4>User Clicked On These</h4>
            {{#if clicks}}


                      {{#each clicks}}
                          <div>
                            <p>
                              <strong>Clicked This :</strong> {{clickedThis}}
                            </p>
                            <p>
                              <strong>Clicked At: </strong>{{clickedAt}}
                            </p>
                          </div>
                      {{/each}}
            {{else}}
            <p class="text text-help">
              User clicked on nothing yet
            </p>
          {{/if}}
          </div>
        </div>
      </div>
    <hr>

    {{/each}}
    <!-- connections -->
  {{/each}}
  <!-- ips -->
  <!-- row -->
</template>

<template name="home">
  <div class="jumbotron">
    <h1>Welcome!</h1>
  </div>
</template>

<template name="ips">
  <a class="btn btn-info link" href="/">back</a>
  <h1>IPS</h1>
  <!-- {{#each ips}}
    {{> ip}}
  {{/each}} -->
  <pre>
    {{ips}}
  </pre>

</template>

<template name="blogHome">
  <p>
    This is the home page of our blog
  </p>
  <p>
    <a href="/hello-world">See Hello World Post</a>
  </p>
</template>

<template name="blogPost">
  <p>
    <a href="/" class="link">Back</a> <br>
    This is a sing blog post
  </p>
</template>

<template name="ip">
  <ul>
    <li><strong>ID:</strong> {{_id}}</li>
    <li><strong>IP:</strong> {{ipAdr}}</li>
    <li>
      <p>
        <strong>Connections from this Ip</strong>
      </p>
      <button class="showHide">Toggle</button>
      <ul class="conns">
      {{#each item in connections}}
        {{#each keyval item}}
          <li><span>{{key}} : {{value}}</span></li>
        {{/each}}
      {{/each}}
    </ul>
  </li>
    <li><strong>Ip first registered:</strong> {{createdAt}}</li>
  </ul>
</template>

<template name="task">
  <li>{{text}}</li>
</template>

<template name="conn">
  <li><ul>
    <li>{{connID}}</li>
    <li>{{ipAdr}}</li>
    <li>
      <ul>
        <!-- {{#each item in httpHeads}}
          {{#each keyval item}}
            <li><span>{{key}} : {{val}}</span></li>
          {{/each}}
        {{/each}} -->
        <li>{{httpHeads.host}}</li>
        <li>{{httpHeads.userAgent}}</li>
        <li>{{httpHeads.realIP}}</li>
      </ul>
    </li>
    <li>{{createdAt}}</li>
  </ul></li>
</template>
